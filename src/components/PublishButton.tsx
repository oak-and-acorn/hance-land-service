'use client'\n\nimport React, { useState } from 'react'\n\nexport function PublishButton() {\n  const [isPublishing, setIsPublishing] = useState(false)\n  const [message, setMessage] = useState('')\n  const [showMessage, setShowMessage] = useState(false)\n  const [status, setStatus] = useState<'success' | 'error' | null>(null)\n  const [statusMessage, setStatusMessage] = useState('')\n\n  const handlePublish = async () => {\n    setIsPublishing(true)\n    setStatus(null)\n    \n    try {\n      const response = await fetch('/api/publish', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          message: message || 'Published content changes'\n        }),\n      })\n\n      const result = await response.json()\n\n      if (response.ok) {\n        setStatus('success')\n        setStatusMessage('Changes published successfully!')\n        setMessage('') // Clear the message\n        \n        // Auto-hide success message after 3 seconds\n        setTimeout(() => {\n          setStatus(null)\n          setStatusMessage('')\n        }, 3000)\n      } else {\n        setStatus('error')\n        setStatusMessage(result.error || 'Failed to publish changes')\n      }\n    } catch (error) {\n      setStatus('error')\n      setStatusMessage('Network error occurred')\n    } finally {\n      setIsPublishing(false)\n    }\n  }\n\n  return (\n    <div className=\"publish-widget\" style={{\n      position: 'fixed',\n      top: '20px',\n      right: '20px',\n      background: 'white',\n      border: '2px solid #e2e8f0',\n      borderRadius: '8px',\n      padding: '16px',\n      boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)',\n      zIndex: 1000,\n      minWidth: '300px'\n    }}>\n      <h3 style={{ margin: '0 0 12px 0', fontSize: '16px', fontWeight: 'bold' }}>\n        ðŸ“¢ Publish Changes\n      </h3>\n      \n      <div style={{ marginBottom: '12px' }}>\n        <label style={{ display: 'block', fontSize: '14px', marginBottom: '4px' }}>\n          Commit message (optional):\n        </label>\n        <input\n          type=\"text\"\n          value={message}\n          onChange={(e) => setMessage(e.target.value)}\n          placeholder=\"Published content changes\"\n          style={{\n            width: '100%',\n            padding: '6px 8px',\n            border: '1px solid #d1d5db',\n            borderRadius: '4px',\n            fontSize: '14px'\n          }}\n          disabled={isPublishing}\n        />\n      </div>\n\n      <button\n        onClick={handlePublish}\n        disabled={isPublishing}\n        style={{\n          width: '100%',\n          padding: '8px 16px',\n          background: isPublishing ? '#9ca3af' : '#059669',\n          color: 'white',\n          border: 'none',\n          borderRadius: '4px',\n          fontSize: '14px',\n          fontWeight: 'bold',\n          cursor: isPublishing ? 'not-allowed' : 'pointer'\n        }}\n      >\n        {isPublishing ? 'ðŸ”„ Publishing...' : 'ðŸš€ Publish to Live Site'}\n      </button>\n\n      {status && (\n        <div\n          style={{\n            marginTop: '12px',\n            padding: '8px',\n            borderRadius: '4px',\n            fontSize: '14px',\n            background: status === 'success' ? '#dcfce7' : '#fee2e2',\n            color: status === 'success' ? '#166534' : '#dc2626',\n          }}\n        >\n          {statusMessage}\n        </div>\n      )}\n\n      <div style={{ marginTop: '8px', fontSize: '12px', color: '#6b7280' }}>\n        This will merge preview changes to the live website.\n      </div>\n    </div>\n  )\n}